function getCarBrandList(i){var e=i;$.getJSON(e,function(i){if(i){$("#car-brand option").remove();var e="<option value='0'>请选择</option>";$.each(i,function(i,t){e+="<option value='"+t.id+"'>"+t.name+"</option>"}),$("#car-brand").append(e)}})}function getCarTypeList(i,e){if(i){var t=e+"/"+i;$.getJSON(t,function(i){if(i){$("#car-type option").remove();var e="<option value='0'>请选择</option>";$.each(i,function(i,t){e+="<option value='"+t.id+"'>"+t.type_name+"</option>"}),$("#car-type").append(e)}})}else{var a="<option value='0'>请选择</option>";$("#car-type").html(a)}}function getCarConfigList(i,e){if(i){var t=e+"/"+i;$.getJSON(t,function(i){if(i){$("#detail option").remove();var e="<option value='0'>请选择</option>";$.each(i,function(i,t){e+="<option value='"+t.id+"'>"+t.content+"</option>"}),$("#detail").append(e)}})}else{var a="<option value='0'>请选择</option>";$("#detail").html(a)}}function getProvinceList(i){var e=i;$.getJSON(e,function(i){if(i){$("#province option").remove();var e="<option value='0'>省</option>";$.each(i,function(i,t){e+="<option value='"+t.provinceid+"'>"+t.province+"</option>"}),$("#province").append(e)}})}function getCitiesList(i,e){if(i){var t=e+"/"+i;$.getJSON(t,function(i){if(i){$("#city option").remove();var e="<option value='0'>市</option>";$.each(i,function(i,t){e+="<option value='"+t.cityid+"'>"+t.city+"</option>"}),$("#city").append(e)}})}else{var a="<option value='0'>市</option>";$("#city").html(a)}}function getAreasList(i,e){if(i){var t=e+"/"+i;console.log("areasList:"+t),$.getJSON(t,function(i){if(i){$("#region option").remove();var e="<option value='0'>区</option>";$.each(i,function(i,t){e+="<option value='"+t.areaid+"'>"+t.area+"</option>"}),$("#region").append(e)}})}else{var a="<option value='0'>区</option>";$("#region").html(a)}}function clear(){$("#name").val(""),$("#phone").val(""),$("#qq").val(""),$("#wx").val(""),$("#note").val(""),$(".error-msg").remove()}!function(i){i.extend({formDialog:function(t){var a=i.extend({},e,t);a.dialogObj.css("display","block"),a.dialogCover.css("display","block"),a.dialogCover.on("click",function(){a.dialogObj.css("display","none"),i(this).css("display","none"),clear()}),i("#info_form :input").blur(function(){if($parent=i(this).parent(),$parent.find(".error-msg").remove(),i(this).is("#name")&&""==this.value){var e="姓名不能为空";$parent.append('<div class="error-msg">'+e+"</div>")}if(i(this).is("#phone"))if(""==this.value){var e="手机号不能为空";$parent.append('<div class="error-msg">'+e+"</div>")}else if(i.isNumeric(this.value)){if(11===this.value.toString().length)return!0;var e="输入有误，手机号码应为11位";$parent.append('<div class="error-msg">'+e+"</div>")}else{var e="手机号格式有误";$parent.append('<div class="error-msg">'+e+"</div>")}if(i(this).is("#qq"))if(""==this.value){var e="QQ号不能为空";$parent.append('<div class="error-msg">'+e+"</div>")}else{if(i.isNumeric(this.value))return!0;var e="QQ号只能为数字";$parent.append('<div class="error-msg">'+e+"</div>")}if(i(this).is("#wx"))if(""==this.value){var e="微信号不能为空";$parent.append('<div class="error-msg">'+e+"</div>")}else{if(i.isNumeric(this.value))return!0;var e="微信号只能为数字";$parent.append('<div class="error-msg">'+e+"</div>")}if(i(this).is("select")&&""==this.value){var e="此项不能为空";$parent.append('<div class="error-msg">'+e+"</div>")}}),i("#submit-btn").click(function(){i("#info_form :input").trigger("blur");var e=i("form .error-msg").length;if(e)return i(window).width()>900&&1242!==i(window).width()?a.dialogObj.css("height","670px"):a.dialogObj.css("height","16.6rem"),!1;var t=a.submitUrl,o=i("#info_form").serialize(),n=i("#feedback");return i.ajax({type:"post",url:t,dataType:"json",data:o,success:function(e){a.dialogObj.css("display","none"),clear(),n.css("display","block"),n.html("<div class='feedback-content'><p>提交成功</p><p></p><p>Submit successfully</p><div id='feedback-btn'>确定</div></div>"),i("#feedback-btn").click(function(){n.css("display","none"),a.dialogCover.css("display","none")})},error:function(e,t){a.dialogObj.css("display","none"),n.css("display","block"),n.html("<div class='feedback-content'><p>提交失败</p><p></p><p>Submit successfully</p><div id='feedback-btn'>确定</div></div>"),i("#feedback-btn").click(function(){n.css("display","none"),a.dialogCover.css("display","none")})}}),!1}),getCarBrandList(a.getCarBrandUrl),getCarTypeList(0,""),getCarConfigList(0,""),getCitiesList(0,""),getAreasList(0,""),i(document).on("change","#car-brand",function(){var e=i(this).val();getCarTypeList(e,a.getCartypeUrl)}),i(document).on("change","#car-type",function(){var e=i(this).val();getCarConfigList(e,a.getCarConfigUrl)}),getProvinceList(a.getProvinceUrl),i(document).on("change","#province",function(){var e=i(this).val();getCitiesList(e,a.getCitiesUrl)}),i(document).on("change","#city",function(){var e=i(this).val();getAreasList(e,a.getAreasUrl)})}});var e={dialogObj:i("#dialog-box"),dialogCover:i("#body-cover"),submitUrl:"http://localhost:8000/data/user_order",getCarBrandUrl:"http://localhost:8000/data/car_brand",getCartypeUrl:"http://localhost:8000/data/car_type",getCarConfigUrl:"http://localhost:8000/data/car_config",getProvinceUrl:"http://localhost:8000/data/provinces",getCitiesUrl:"http://localhost:8000/data/cities",getAreasUrl:"http://localhost:8000/data/areas"}}(window.jQuery);