<!DOCTYPE html>
<html>
<head>
	<title>投资推荐</title>
	<meta charset="utf-8" />
	<link rel="stylesheet" href="css/style.css">
	<link rel="stylesheet" href="css/recommend.css">
</head>
<body>
	<div class="body-container">
		<header>
			<div id="logo"><span>P2P舆情分析</span></div>
			<nav>
				<ul class="nav-list">
					<li><a href="index.html">首页</a></li>
					<li class="nav-active"><a href="recommend.html">投资推荐</a></li>
					<li><a href="industry-opinion.html" >行业舆情</a></li>
					<li><a href="platform-opinion.html">品牌舆情</a></li>
					<li><a href="about.html">入门精华帖</a></li>
				</ul>
			</nav>
		</header>
		<section class="content">
			<img src="images/recommend.jpg" width="1280px"alt="投资推荐" />
			<div class="content-body">
				<section id="risk">
					<span class="risk-title">个人投资偏好测评</span>
					<div id="risk-Q">
						<form action="post" id="risk-form">		
							<p class="intro-text">以下问卷能帮助投资者准确的对自我风险承受能力，投资理念，投资性格等进行专业的认知测试，综合评估您的风险承受能力高低，是您进行投资理财前的重要准备工作！因此，请认真回答以下问题:</p>	
							<div class="Q-input-group">
								<span for="1" class="Q-title">1. 您的年龄在以下哪个范围内？</span>
								<input name="1" type="radio" value="A" id="1-A" required /><label for="1-A" >&nbsp;A.&nbsp;29岁以下</label> 
								<input name="1" type="radio" value="B" id="1-B" /><label for="1-B">&nbsp;B.&nbsp;30-39岁 </label>  
								<input name="1" type="radio" value="C" id="1-C" /><label for="1-C">&nbsp;
								C.&nbsp;40-49岁 
								</label>
								<input name="1" type="radio" value="D" id="1-D" /><label for="1-D">&nbsp;D.&nbsp;50-59岁</label>			
								<input name="1" type="radio" value="E" id="1-E" /><label for="1-E">&nbsp;E.&nbsp;60岁以上</label>			
							</div>			
							<div class="Q-input-group">
								<span for="2" class="Q-title">2. 您有过几年的投资经验？</span>
								<input name="2" type="radio" value="A" id="2-A" required /><label for="2-A" >&nbsp;A.&nbsp;10年以上</label> 
								<input name="2" type="radio" value="B" id="2-B" /><label for="2-B">&nbsp;B.&nbsp;6-10年 </label>  
								<input name="2" type="radio" value="C" id="2-C" /><label for="2-C">&nbsp;
								C.&nbsp;3-5年 </label>
								<input name="2" type="radio" value="D" id="2-D" /><label for="2-D">&nbsp;D.&nbsp;1-2年	</label>			
								<input name="2" type="radio" value="E" id="2-E" /><label for="2-E">&nbsp;E.&nbsp;1年以下 </label>
							</div>			
							<div class="Q-input-group">
								<span for="3" class="Q-title">3. 您是否有过投资经验？</span>
								<input name="3" type="radio" value="A" id="3-A" required /><label for="3-A" >&nbsp;A.&nbsp;有投资贵金属、外汇、期货、期权等高风险衍生品经验   </label> <br/>
								<input name="3" type="radio" value="B" id="3-B" /><label for="3-B">&nbsp;B.&nbsp;有投资股票、股票型基金的经验 </label>  <br/>
								<input name="3" type="radio" value="C" id="3-C" /><label for="3-C">&nbsp;C.&nbsp;有购买过银行的理财产品、债券基金、分红型、投连险   </label><br/>
								<input name="3" type="radio" value="D" id="3-D" /><label for="3-D">&nbsp;D.&nbsp;有购买过保本基金、货币基金（如余额宝）、信托等低风险产品 	</label><br/>			
								<input name="3" type="radio" value="E" id="3-E" /><label for="3-E">&nbsp;E.&nbsp;从未有过投资经历，只存银行的定期或活期  </label><br/>
							</div>			
							<div class="Q-input-group">
								<span for="4" class="Q-title">4. 您的家庭目前全年收入状况如何？</span>
								<input name="4" type="radio" value="A" id="4-A" required /><label for="4-A" >&nbsp;A.&nbsp;50万元以上</label> 
								<input name="4" type="radio" value="B" id="4-B" /><label for="4-B">&nbsp;B.&nbsp;30-50万元 </label>  
								<input name="4" type="radio" value="C" id="4-C" /><label for="4-C">&nbsp;
								C.&nbsp;15-30万元 </label>
								<input name="4" type="radio" value="D" id="4-D" /><label for="4-D">&nbsp;D.&nbsp;5-15万元	</label>			
								<input name="4" type="radio" value="E" id="4-E" /><label for="4-E">&nbsp;E.&nbsp;5万元以下 </label>
							</div>			
							<div class="Q-input-group">
								<span for="5" class="Q-title">5. 您投资的主要目的是什么？选择最符合您的一个描述：</span>
								<input name="5" type="radio" value="A" id="5-A" required /><label for="5-A" >&nbsp;A.&nbsp;关心长期的高回报，能够接受短期的资产价值波动。   </label> <br/>
								<input name="5" type="radio" value="B" id="5-B" /><label for="5-B">&nbsp;B.&nbsp;倾向长期的成长，较少关心短期的回报以及波动。 </label>  <br/>
								<input name="5" type="radio" value="C" id="5-C" /><label for="5-C">&nbsp;C.&nbsp;希望投资能获得一定的增值，同时获得波动适度的年回报。   </label><br/>
								<input name="5" type="radio" value="D" id="5-D" /><label for="5-D">&nbsp;D.&nbsp;只想确保资产的安全性，同时希望能够得到固定的收益。 	</label><br/>			
								<input name="5" type="radio" value="E" id="5-E" /><label for="5-E">&nbsp;E.&nbsp; 希望利用投资以及投资所获得的收益在短期内用于大额的购买计划。  </label><br/>
							</div>			
							<div class="Q-input-group">
								<span for="6" class="Q-title">6. 当您进行投资时（例如基金、股票），您能接受一年内损失多少？</span>
								<input name="6" type="radio" value="A" id="6-A" required /><label for="6-A" >&nbsp;A.&nbsp;我能承受25％以上亏损</label><br/> 
								<input name="6" type="radio" value="B" id="6-B" /><label for="6-B">&nbsp;B.&nbsp;我能承受10-20％的亏损 </label> <br/>  
								<input name="6" type="radio" value="C" id="6-C" /><label for="6-C">&nbsp;C.&nbsp;我最多只能承受5-10%的亏损 </label><br/> 
								<input name="6" type="radio" value="D" id="6-D" /><label for="6-D">&nbsp;D.&nbsp;我最多只能承受5%以下的亏损	</label><br/> 		
								<input name="6" type="radio" value="E" id="6-E" /><label for="6-E">&nbsp;E.&nbsp;我几乎不能承受任何亏损</label>
							</div>			
							<div class="Q-input-group">
								<span for="7" class="Q-title">7. 目前您的投资主要是哪一品种？</span>
								<input name="7" type="radio" value="A" id="7-A" required /><label for="7-A" >&nbsp;A.&nbsp;外汇、期货、现货贵金属 等超高风险资产</label><br/>  
								<input name="7" type="radio" value="B" id="7-B" /><label for="7-B">&nbsp;B.&nbsp;股票、股票基金、私募股权基金 等高风险资产 </label><br/>   
								<input name="7" type="radio" value="C" id="7-C" /><label for="7-C">&nbsp;C.&nbsp;混合基金、指数基金、结构类产品 等较高风险资产 </label><br/> 
								<input name="7" type="radio" value="D" id="7-D" /><label for="7-D">&nbsp;D.&nbsp;银行理财产品、信托、固定收益类基金（有限合伙基金）、货币基金(如余额宝）</label><br/> 			
								<input name="7" type="radio" value="E" id="7-E" /><label for="7-E">&nbsp;E.&nbsp;活期、定期存款、国债、保险 </label>
							</div>			
<!--							<div class="Q-input-group">
								<span for="8" class="Q-title">8. 您在选择p2p理财产品时是否倾向于听取舆论评价？</span>
								<input name="8" type="radio" value="A" id="8-A" required /><label for="8-A" >&nbsp;A.&nbsp;非常同意</label> 
								<input name="8" type="radio" value="B" id="8-B" /><label for="8-B">&nbsp;B.&nbsp;一般同意</label>   
								<input name="8" type="radio" value="C" id="8-C" /><label for="8-C">&nbsp;C.&nbsp;不一定</label>
								<input name="8" type="radio" value="D" id="8-D" /><label for="8-D">&nbsp;D.&nbsp;不同意</label>			
								<input name="8" type="radio" value="E" id="8-E" /><label for="8-E">&nbsp;E.&nbsp;自己判断</label>
							</div>	-->
							<button type="submit" id="Q-btn">提交</button>
						</form>
					</div>	
					<div id="user-risk">
						<div id="risk-close">×</div>
						<div id="result"></div>
					</div>									
				</section>
				<section id="recommend">
					<span class="recommend-title">投资倾向</span>
					<div class="input-group">
						<span for="type" class="label-left">投资收益率</span>
						<select name="radio" id="radio" class="user-select">
							<option value>请选择投资收益率</option>
							<option value="1">7%以下</option>
							<option value="2">7%-10%</option>
							<option value="3">10%-12%</option>
							<option value="4">12%-15%</option>
							<option value="5">15%以上</option>
						</select>
					</div>
					<div class="input-group">
						<span for="duration" class="label-left">投资期限</span>
						<select name="duration" id="duration" class="user-select">
							<option value>请选择投资期限</option>
							<option value="1">1个月内</option>
							<option value="2">1个月-3个月</option>
							<option value="3">3个月-6个月</option>
							<option value="4">6个月-1年</option>
							<option value="5">1年-2年</option>
							<option value="6">2年以上</option>
						</select>
					</div>
					<div class="input-group">
						<span for="duration" class="label-left">听取舆论评价程度</span>
						<select name="duration" id="acceptance-level" class="user-select">
							<option value>请选择听取意愿程度</option>
							<option value="1">非常同意</option>
							<option value="2">一般同意</option>
							<option value="3">不一定</option>
							<option value="4">不同意</option>
							<option value="5">自己判断</option>
						</select>
					</div>
					<button id="recommend-btn">投资推荐</button>
					<p id="recommend_illustrate">
						<span class="frame"></span>点击上方投资推荐按钮，为您推荐最适合于您的网贷产品
					</p>
					<div id="recommend_result">
					<h3></h3>
					<ul id="recommend-result">
					</ul>
					</div>
				</section>

			</div>
		</section>
		<footer>
			© 2015-2016 DUT-P2P舆情分析
		</footer>
	</div>
	<script type="text/javascript">
	var questionBtn = document.getElementById("Q-btn");
	var show_tip = document.getElementById("user-risk");
	function getRank(){
		var parts = [];
		var score = 0;
		var form = document.forms[0];
		for (var i = 0; i < form.elements.length; i++) {
			var field = form.elements[i];
			field.flag=0;
			if (field.name.length) {
				if (field.checked) {field.flag=1;
					parts.push(field.value);
				}
			}
		}
		 problem=[0,0,0,0,0,0,0];
		for(var n=0;n<form.elements.length;n++){
			var p=Math.floor(n/5);
			if(p==0){
				problem[p]+=form.elements[n].flag;
			}else if(p==1){
				problem[p]+=form.elements[n].flag;
			}else if(p==2){
				problem[p]+=form.elements[n].flag;
			}else if(p==3){
				problem[p]+=form.elements[n].flag;
			}else if(p==4){
				problem[p]+=form.elements[n].flag;
			}else if(p==5){
				problem[p]+=form.elements[n].flag;
			}else if(p==6){
				problem[p]+=form.elements[n].flag;
			}
		}
		for(var x=0;x<7;x++){
			if(problem[x]==0){
				var y=x+1;
				alert("问卷问题"+y+"未填写");
			}
		}

		var result=parts.map(function(item,index,array){
			/*console.log(item);*/
			switch (item){
				case "A" : return item = 10; 
				case "B" : return item = 8; 
				case "C" : return item = 5;
				case "D" : return item = 3;
				case "E" : return item = 0;
			}			
		});		
		for (var i = 0; i < result.length; i++) {
			score+=parseInt(result[i]);
		};
		return score;
	}
	questionBtn.addEventListener("click",function(event){
		event.preventDefault();
		var score = getRank();
		show_tip.style.display = "block";
		var result = document.getElementById("result");
		if ( 0 < score && score <= 15) {
			var html = "";
			var span = "得分："+score+";保守型——低风险级别产品";
			var p = "您的风险承担能力水平比较低，您关注资产的安全性远超于资产的收益性，所以低风险 、高流动性的投资品种比较适合您，这类投资的收益相对偏低。"		
			html +="<span class='user-risk-span'>" + span + "<\/span>";
			html +="<p class='user-risk-p'>" + p + "<\/p>";
			result.innerHTML = html;
		} else if( 15 < score && score <= 30 ){
			var html = "";
			var span = "得分："+score+";稳健型——较低风险级别产品";
			var p = "您有比较有限的风险承受能力，对投资收益比较敏感，期望通过短期、持续、渐进的投资获得高于定期存款的回报。所以较低等级风险的产品如保本保息的固定收益类，比较适合您，适当回避风险的同时保证收益，跑赢通胀。"		
			html +="<span class='user-risk-span'>" + span + "<\/span>";
			html +="<p class='user-risk-p'>" + p + "<\/p>";
			result.innerHTML = html;
		} else if(30 < score && score <= 45){
			var html = "";
			var span = "得分："+score+";平衡型——中等风险级别产品";
			var p = "您有一定的风险承受能力，对投资收益比较敏感，期望通过长期且持续的投资获得高于平均水平的回报，通常更注重十年甚至更长期限内的平均收益。所以中等风险收益的投资品种比较适合您，回避风险的同时有一定的收益保证。"		
			html +="<span class='user-risk-span'>" + span + "<\/span>";
			html +="<p class='user-risk-p'>" + p + "<\/p>";
			result.innerHTML = html;
		} else if(45 < score && score <=60){
			var html = "";
			var span = "得分："+score+";积极型——较高风险级别产品";
			var p = "您有中高的风险承受能力，愿意承担可预见的投资风险去获取更多的收益，一般倾向于进行中短期投资。所以中高等级的风险收益投资品种比较适合您，以一定的可预见风险换取超额收益。"		
			html +="<span class='user-risk-span'>" + span + "<\/span>";
			html +="<p class='user-risk-p'>" + p + "<\/p>";
			result.innerHTML = html;
		} else if(60<score && score <70){
			var html = "";
			var span = "得分："+score+";激进型——高风险级别产品";
			var p = "您有较高的风险承受能力，是富有冒险精神的积极型选手。在投资收益波动的情况下，仍然保持积极进取的投资理念。短期内投资收益的下跌被您视为加注投资的利好机会。您适合从事灵活、风险与报酬都比较高的投资，不过要注意不要因一时的高报酬获利而将全部资金投入高风险操作，务必做好风险管理与资金调配工作。"		
			html +="<span class='user-risk-span'>" + span + "<\/span>";
			html +="<p class='user-risk-p'>" + p + "<\/p>";
			result.innerHTML = html;
		}
	},false);
	var close = document.getElementById("risk-close");
	close.addEventListener("click",function(){
		show_tip.style.display = "none";
	},false);
	var radio=document.getElementById("radio");
	var duration=document.getElementById("duration");
	var acceptance_level=document.getElementById("acceptance-level");
	var radiopre_score=1,durationpre_score=1,acceptance_levelpre_score=1;
	radio.onchange=function (){
		var radio_option=radio.options;
		var x=radio.selectedIndex;//下拉列表中被选项的索引号
		/*console.log(radio_option[x].index);*/
		if(radio_option[x].index==1){
			radiopre_score=0.2;
		}else if(radio_option[x].index==2){
			radiopre_score=0.5;
		}else if(radio_option[x].index==3){
			radiopre_score=0.7;
		}else if(radio_option[x].index==4){
			radiopre_score=0.8;
		}else if(radio_option[x].index==5){
			radiopre_score=0.9;
		}
	}
	duration.onchange=function (){
		var duration_option=duration.options;
		var x=duration.selectedIndex;//下拉列表中被选项的索引号
	/*	console.log(duration_option[x].index);*/
		if(duration_option[x].index==1){
			durationpre_score=0.9;
		}else if(duration_option[x].index==2){
			durationpre_score=0.7;
		}else if(duration_option[x].index==3){
			durationpre_score=0.5;
		}else if(duration_option[x].index==4){
			durationpre_score=0.4;
		}else if(duration_option[x].index==5){
			durationpre_score=0.2;
		}else if(duration_option[x].index==6){
			durationpre_score=0.1;
		}
	}

	acceptance_level.onchange=function (){
		var acceptance_level_option=acceptance_level.options;
		var x=acceptance_level.selectedIndex;//下拉列表中被选项的索引号
	/*	console.log(acceptance_level_option[x].index);*/
		if(acceptance_level_option[x].index==1){
			acceptance_levelpre_score=0.9;
		}else if(acceptance_level_option[x].index==2){
			acceptance_levelpre_score=0.7;
		}else if(acceptance_level_option[x].index==3){
			acceptance_levelpre_score=0.5;
		}else if(acceptance_level_option[x].index==4){
			acceptance_levelpre_score=0.3;
		}else if(acceptance_level_option[x].index==5){
			acceptance_levelpre_score=0.1;
		}
	}

	function getRankscore(value) {
		var getRank_score;
		if(value<=15){
			getRank_score = 0.9;
		}else if(value>15&&value<=30){
			getRank_score = 0.7;
		}else if(value>30&&value<=45){
			getRank_score= 0.5;
		}else if(value>45&&value<=60){
			getRank_score= 0.3;
		}else if(value>60){
			getRank_score= 0.1;
		}
		return getRank_score;
	}

	//创建对象数组
		var platform=[
			{"platname":"翼龙贷-翼农计划", "vector":[0.8,0.9,0.2,0.7],"totalscore":0},
			{"platname":"陆金所-安盈票据", "vector":[0.7,0.7,0.2,0.8],"totalscore":0},
			{"platname":"链家理财-家多宝", "vector":[0.9,0.9,0.2,0.8],"totalscore":0},
			{"platname":"积木盒子-项目集", "vector":[0.7,0.9,0.2,0.8],"totalscore":0},
			{"platname":"有利网-定存宝", "vector":[0.7,0.7,0.5,0.7],"totalscore":0},
			{"platname":"宜人贷-宜定赢1", "vector":[0.7,0.9,0.5,0.7],"totalscore":0},
			{"platname":"陆金所-稳赢-安e", "vector":[0.8,0.9,0.2,0.7],"totalscore":0},
			{"platname":"开鑫贷-变现贷", "vector":[0.8,0.7,0.5,0.8],"totalscore":0},
			{"platname":"开鑫贷-保鑫汇", "vector":[0.6,0.2,0.5,0.8],"totalscore":0},
			{"platname":"有利网-月息通", "vector":[0.4,0.1,0.7,0.7],"totalscore":0},
			{"platname":"银客网-优房宝", "vector":[0.8,0.9,0.2,0.7],"totalscore":0},
			{"platname":"易贷网-债权质押借款", "vector":[0.7,0.9,0.7,0.8],"totalscore":0},
			{"platname":"宜人贷-宜定赢2", "vector":[0.4,0.2,0.7,0.7],"totalscore":0},
			{"platname":"小牛在线-安心牛", "vector":[0.5,0.7,0.7,0.4],"totalscore":0},
			{"platname":"微贷网-质押", "vector":[0.6,0.7,0.7,0.7],"totalscore":0},
			{"platname":"投哪网-年省心", "vector": [0.5,0.4,0.7,0.6],"totalscore":0},
			{"platname":"人人贷-资金周转", "vector":[0.5,0.4,0.7,0.9],"totalscore":0},
			{"platname":"ppmoney-懒人宝", "vector":[0.5,0.5,0.7,0.4],"totalscore":0},
			{"platname":"ppmoney-分期宝", "vector":[0.2,0.5,0.7,0.4],"totalscore":0},
			{"platname":"微贷网-大众CC抵押", "vector":[0.4,0.4,0.8,0.7],"totalscore":0},
			{"platname":"爱钱进-散标", "vector":[0.2,0.1,0.8,0.6],"totalscore":0},
			{"platname":"拍拍贷-个人借款", "vector":[0.2,0.4,0.9,0.7],"totalscore":0},
			{"platname":"陆金所-财富汇-产品", "vector":[0.1,0.1,0.9,0.8],"totalscore":0}
		];

	var submit=document.getElementById("recommend-btn");
	var recommend_result=document.getElementById("recommend-result");
	var show_result=document.getElementById("recommend_result");
    var recommend_illustrate=document.getElementById("recommend_illustrate");
		submit.onclick=function () {
			var html="<li>"+"<span>"+"排名"+"</span>"+"<span>"+"平台"+"</span>"+"<span>"+"总分"+"</span>"+"</li>";;
		        if(radiopre_score==1){
					alert("投资收益率倾向未选择");
				}
			   if(durationpre_score==1){
					alert("投资期限倾向未选择");
				}
			   if(acceptance_levelpre_score==1){
					alert("听取舆论评价程度倾向未选择");
				}
			var questionnaire_score=getRankscore(getRank());//转换
			var arr=[questionnaire_score,durationpre_score,radiopre_score,acceptance_levelpre_score];

			function Array_2(nRow,nColumn){
				var array1=new Array(); //定义一维数组
				for(i=0;i<nRow;i++){
					//将每一个子元素又定义为数组
					array1[i]=new Array();
//----------------------------------------
					for(n=0;n<nColumn;n++){
						array1[i][n] = ''; //此时aa[i][n]可以看作是一个二级数组
					}
//--------------------------------------
				}
				return array1;
			}
			var array_2= Array_2(23,2);
			var total=0;
			function check() {
				for(var s=0;s<7;s++){
					total=total+problem[s];
				}
				if(total==7&&radiopre_score!=1&&durationpre_score!=1&&acceptance_levelpre_score!=1){
					for(var i=0;i<platform.length;i++){
						platform[i].totalscore=0;
						for(var j=0;j<4;j++){
							platform[i].totalscore+=platform[i].vector[j]*arr[j];
						}
						/*console.log(parseFloat(platform[i].totalscore));*/
						array_2[i][0]=platform[i].totalscore;
						array_2[i][1]=platform[i].platname;
					}
					for(var k=0;k<23;k++){
						for(var l=0;l<23-k-1;l++){
							if(array_2[l][0]<array_2[l+1][0])
							{
								var temp=array_2[l][0];
								array_2[l][0]=array_2[l+1][0];
								array_2[l+1][0]=temp;
								var temp2=array_2[l][1];
								array_2[l][1]=array_2[l+1][1];
								array_2[l+1][1]=temp2;
							}
						}
					}

				}
				for(var i=0;i<6;i++) {
					var j=i+1;
					html+="<li>"+"<span>"+"TOP"+j+"</span>"+"<span>"+array_2[i][1]+"</span>"+"<span>"+array_2[i][0].toFixed(3)+"</span>"+"</li>";
				}
				recommend_result.innerHTML=html;
				recommend_illustrate.style.display="none";
				show_result.style.display="block";
				}
			check();

			}

	</script>
</body>
</html>




